<html>
    <head>
        <meta charset="UTF-8" />
        <title>elm-cardano</title>
        <!-- Load the JS companion file -->
        <script src="elm-cardano.js"></script>
    </head>

    <body>
        <div id="myapp"></div>
        <script type="module" defer>
            // OPTIONAL: Import the uplc-wasm-web package generated by elm-cardano
            // Only needed if you intend to build transactions with plutus scripts
            import uplc_wasm_init, * as uplc_wasm from "/pkg-uplc-wasm/pkg-web/uplc_wasm.js";
            await uplc_wasm_init();
            window.uplc_wasm = uplc_wasm;

            // Helper function to dynamically load a JS file.
            // Needed to make sure `window.uplc_wasm` is populated first.
            function loadScript(url) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement("script");
                    script.src = url;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.body.appendChild(script);
                });
            }
            // Load the Main.elm compiled file
            await loadScript("/main.js");
            var app = Elm.Main.init({
                node: document.getElementById("myapp"),
                flags: null,
            });
            // Initialize default ports for the app
            initElmCardanoJs({
                portFromElmToWallet: null, // app.ports.toWallet,
                portFromWalletToElm: null, //app.ports.fromWallet,
                portFromElmToOgmios: null, // app.ports.toOgmios,
                portFromOgmiosToElm: null, // app.ports.fromOgmios,
            });
        </script>
    </body>
</html>
